# ğŸ¨ VisÃ£o Geral Visual - Sistema de AutenticaÃ§Ã£o

## ğŸ“Š Arquitetura do Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     App.js                                 â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ /login  â†’ LoginPage.js                              â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ /register â†’ RegisterPage.js                         â”‚  â”‚
â”‚  â”‚  â””â”€â”€ / â†’ LandingPage.js (com UserMenu)                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                              â–¼                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚          useAuth Hook (hooks/useAuth.js)            â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ login()   â€¢ register()   â€¢ logout()              â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ refreshToken()   â€¢ verifyToken()                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ user, token, loading, error, isAuthenticated     â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                              â”‚                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”‚                              â–¼                           â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚      APIClient (services/api.js)                â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Interceptor automÃ¡tico de JWT                â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Adiciona Authorization: Bearer token         â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ MÃ©todos: get, post, put, delete, patch       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚  â”‚                              â”‚                           â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚                                 â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ HTTP/HTTPS
                                      â”‚ Authorization: Bearer <token>
                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â–¼                               â”‚
â”‚          BACKEND (Node.js + Express)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Routes (routes/auth.js)                          â”‚  â”‚
â”‚  â”‚  POST /auth/register  â†’ criar novo usuÃ¡rio                â”‚  â”‚
â”‚  â”‚  POST /auth/login     â†’ autenticar usuÃ¡rio                â”‚  â”‚
â”‚  â”‚  GET  /auth/verify    â†’ validar token                     â”‚  â”‚
â”‚  â”‚  POST /auth/refresh   â†’ renovar token                     â”‚  â”‚
â”‚  â”‚  POST /auth/logout    â†’ logout (notificaÃ§Ã£o)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                           â–¼                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚    Middleware (middleware/auth.js)                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Validar JWT                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Extrair dados do token â†’ req.user                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Proteger rotas autenticadas                        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                           â”‚                                   â”‚ â”‚
â”‚  â”‚                           â–¼                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚         Models (models/user.js)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ UsuÃ¡rio                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Email Ãºnico                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Senha criptografada (bcrypt)                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Dados de perfil                                    â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                           â”‚                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    PostgreSQL Database
                    (Armazena usuÃ¡rios)
```

---

## ğŸ”„ Fluxo de AutenticaÃ§Ã£o

### Registro
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UsuÃ¡rio preenche   â”‚
â”‚  formulÃ¡rio de      â”‚
â”‚  registro           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend valida    â”‚
â”‚  entrada (Frontend) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /auth/registerâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend valida:            â”‚
â”‚  â€¢ Email Ãºnico              â”‚
â”‚  â€¢ Nome vÃ¡lido              â”‚
â”‚  â€¢ Senha forte              â”‚
â”‚  â€¢ Requisitos atendidos     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼ (âœ“ VÃ¡lido)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend:                   â”‚
â”‚  â€¢ Hash da senha (bcrypt)   â”‚
â”‚  â€¢ Cria usuÃ¡rio no DB       â”‚
â”‚  â€¢ Gera JWT                 â”‚
â”‚  â€¢ Retorna token            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend:                  â”‚
â”‚  â€¢ Armazena token           â”‚
â”‚  â€¢ localStorage.authToken   â”‚
â”‚  â€¢ Redireciona para home    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Login
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UsuÃ¡rio preenche    â”‚
â”‚  email + senha       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /auth/login     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend:                       â”‚
â”‚ â€¢ Busca usuÃ¡rio por email      â”‚
â”‚ â€¢ Compara senha (bcrypt)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                   â”‚
  â–¼                   â–¼
(âœ“ OK)           (âœ— Erro)
â”‚                   â”‚
â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gera JWT    â”‚  â”‚ 401 Error â”‚
â”‚ Retorna     â”‚  â”‚ (genÃ©rico)â”‚
â”‚ token       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend armazena    â”‚
â”‚ localStorage.token   â”‚
â”‚ Redireciona home     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ Estrutura de Componentes

```
App.js
â”œâ”€â”€ Navbar
â”‚   â””â”€â”€ UserMenu (novo)
â”‚       â”œâ”€â”€ Se autenticado:
â”‚       â”‚   â”œâ”€â”€ Avatar + Nome
â”‚       â”‚   â”œâ”€â”€ Perfil
â”‚       â”‚   â”œâ”€â”€ ConfiguraÃ§Ãµes
â”‚       â”‚   â””â”€â”€ Logout
â”‚       â””â”€â”€ Se nÃ£o autenticado:
â”‚           â”œâ”€â”€ Link Login
â”‚           â””â”€â”€ Link Register
â”‚
â”œâ”€â”€ Routes
â”‚   â”œâ”€â”€ / â†’ LandingPage
â”‚   â”œâ”€â”€ /login â†’ LoginPage (novo)
â”‚   â”‚   â””â”€â”€ Usa: useAuth hook
â”‚   â”œâ”€â”€ /register â†’ RegisterPage (novo)
â”‚   â”‚   â””â”€â”€ Usa: useAuth hook
â”‚   â””â”€â”€ /dashboard â†’ ProtectedRoute (novo)
â”‚       â””â”€â”€ Dashboard
â”‚           â””â”€â”€ Usa: useAuth hook
â”‚
â””â”€â”€ Footer
    â””â”€â”€ Links normais
```

---

## ğŸ” SeguranÃ§a em Camadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CAMADA 1: Frontend                      â”‚
â”‚  âœ“ ValidaÃ§Ã£o de entrada                          â”‚
â”‚  âœ“ Requisitos de senha em tempo real              â”‚
â”‚  âœ“ SanitizaÃ§Ã£o de dados                           â”‚
â”‚  âœ“ Armazenamento seguro de token                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CAMADA 2: Network                       â”‚
â”‚  âœ“ HTTPS (recomendado em produÃ§Ã£o)               â”‚
â”‚  âœ“ CORS configurado                               â”‚
â”‚  âœ“ ValidaÃ§Ã£o de headers                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CAMADA 3: Backend                       â”‚
â”‚  âœ“ ValidaÃ§Ã£o de entrada                          â”‚
â”‚  âœ“ Hash de senha (bcrypt)                         â”‚
â”‚  âœ“ Middleware de autenticaÃ§Ã£o                     â”‚
â”‚  âœ“ JWT com expiraÃ§Ã£o                              â”‚
â”‚  âœ“ Rate limiting (recomendado)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CAMADA 4: Database                      â”‚
â”‚  âœ“ ValidaÃ§Ã£o de constraints                       â”‚
â”‚  âœ“ Email Ãºnico                                    â”‚
â”‚  âœ“ TransaÃ§Ãµes ACID                                â”‚
â”‚  âœ“ Backups regulares                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Estados do Hook useAuth

```
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   useAuth Hook      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚                      â”‚
        â–¼                      â–¼                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  user  â”‚           â”‚  token  â”‚          â”‚ loading  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ id     â”‚           â”‚ JWT     â”‚          â”‚ true/    â”‚
    â”‚ name   â”‚           â”‚ string  â”‚          â”‚ false    â”‚
    â”‚ email  â”‚           â”‚ stored  â”‚          â”‚          â”‚
    â”‚ isVip  â”‚           â”‚ in      â”‚          â”‚ Durante  â”‚
    â”‚ isAdminâ”‚           â”‚ local   â”‚          â”‚ request  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ storage â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                      â”‚                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚                      â”‚
        â–¼                      â–¼                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ error  â”‚           â”‚isAuthenticatedâ”‚     â”‚functions â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ string â”‚           â”‚ boolean      â”‚      â”‚ login()  â”‚
    â”‚ ou     â”‚           â”‚              â”‚      â”‚ register â”‚
    â”‚ null   â”‚           â”‚ user &&      â”‚      â”‚ logout() â”‚
    â”‚        â”‚           â”‚ token ?      â”‚      â”‚ refresh  â”‚
    â”‚ Error  â”‚           â”‚ true : false â”‚      â”‚ verify   â”‚
    â”‚message â”‚           â”‚              â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Fluxo de RequisiÃ§Ã£o Autenticada

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Componente faz     â”‚
â”‚  requisiÃ§Ã£o:        â”‚
â”‚  apiClient.get()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APIClient (services/api.js)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Pega token:                 â”‚
â”‚     localStorage.authToken      â”‚
â”‚                                 â”‚
â”‚  2. Adiciona header:            â”‚
â”‚     Authorization:              â”‚
â”‚     Bearer <token>              â”‚
â”‚                                 â”‚
â”‚  3. Envia requisiÃ§Ã£o            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend recebe requisiÃ§Ã£o      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Middleware (auth.js):          â”‚
â”‚  1. Extrai token do header      â”‚
â”‚                                 â”‚
â”‚  2. Valida JWT:                 â”‚
â”‚     âœ“ Assinatura vÃ¡lida         â”‚
â”‚     âœ“ NÃ£o expirado              â”‚
â”‚     âœ“ Dados corretos            â”‚
â”‚                                 â”‚
â”‚  3. Extrai dados:               â”‚
â”‚     req.user = { id, email }    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
     â”‚           â”‚
     â–¼           â–¼
   (âœ“)         (âœ—)
    â”‚           â”‚
    â–¼           â–¼
 â”Œâ”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚200 â”‚    â”‚  401   â”‚
 â”‚ OK â”‚    â”‚Erro    â”‚
 â””â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Ciclo de Vida do Token

```
UsuÃ¡rio faz login
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JWT criado         â”‚
â”‚  ExpiraÃ§Ã£o: 24h     â”‚
â”‚  VÃ¡lido de: agora   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€ Armazenado em localStorage
          â”‚
          â”œâ”€ Enviado em requests
          â”‚
          â”œâ”€ Validado no backend
          â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
           â”‚  Antes de 24h:  â”‚   â”‚ ApÃ³s 24h:â”‚
           â”‚  âœ“ VÃ¡lido       â”‚   â”‚ âœ— Exp.   â”‚
           â”‚  Usar token     â”‚   â”‚ Erro 401 â”‚
           â”‚  RequisiÃ§Ãµes OK â”‚   â”‚ FaÃ§a     â”‚
           â”‚  Se quiser      â”‚   â”‚ login    â”‚
           â”‚  renovar â†’      â”‚   â”‚ novamenteâ”‚
           â”‚  /auth/refresh  â”‚   â”‚          â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Novo token gerado    â”‚
        â”‚ +24h mais tempo      â”‚
        â”‚ localStorage update  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Componentes e Responsabilidades

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  LoginPage.js                                          â”‚
â”‚  â”œâ”€ FormulÃ¡rio de login                               â”‚
â”‚  â”œâ”€ ValidaÃ§Ã£o de entrada                              â”‚
â”‚  â”œâ”€ Chamada useAuth.login()                           â”‚
â”‚  â”œâ”€ Exibe erros                                       â”‚
â”‚  â””â”€ Redireciona apÃ³s sucesso                          â”‚
â”‚                                                        â”‚
â”‚  RegisterPage.js                                      â”‚
â”‚  â”œâ”€ FormulÃ¡rio de registro                            â”‚
â”‚  â”œâ”€ ValidaÃ§Ã£o em tempo real                           â”‚
â”‚  â”œâ”€ Indicador de requisitos                           â”‚
â”‚  â”œâ”€ Chamada useAuth.register()                        â”‚
â”‚  â”œâ”€ Exibe erros                                       â”‚
â”‚  â””â”€ Redireciona apÃ³s sucesso                          â”‚
â”‚                                                        â”‚
â”‚  useAuth Hook (hooks/useAuth.js)                      â”‚
â”‚  â”œâ”€ Gerencia estado (user, token, etc)                â”‚
â”‚  â”œâ”€ Chamadas Ã  API (/auth/*)                          â”‚
â”‚  â”œâ”€ localStorage                                      â”‚
â”‚  â”œâ”€ login(), register(), logout()                     â”‚
â”‚  â””â”€ refreshToken(), verifyToken()                     â”‚
â”‚                                                        â”‚
â”‚  ProtectedRoute.js                                    â”‚
â”‚  â”œâ”€ Verifica isAuthenticated                          â”‚
â”‚  â”œâ”€ Redireciona se nÃ£o autenticado                    â”‚
â”‚  â”œâ”€ Renderiza componente se OK                        â”‚
â”‚  â””â”€ Mostra loading                                    â”‚
â”‚                                                        â”‚
â”‚  UserMenu.js                                          â”‚
â”‚  â”œâ”€ Mostra dados do usuÃ¡rio                           â”‚
â”‚  â”œâ”€ Menu dropdown                                     â”‚
â”‚  â”œâ”€ Links de logout                                   â”‚
â”‚  â””â”€ Fallback: Login/Register                          â”‚
â”‚                                                        â”‚
â”‚  AuthContext.js                                       â”‚
â”‚  â”œâ”€ Context API wrapper                               â”‚
â”‚  â”œâ”€ Disponibiliza useAuth em toda app                 â”‚
â”‚  â””â”€ Alternativa ao hook                               â”‚
â”‚                                                        â”‚
â”‚  api.js (services)                                    â”‚
â”‚  â”œâ”€ HTTP client                                       â”‚
â”‚  â”œâ”€ Adiciona Authorization header                     â”‚
â”‚  â”œâ”€ MÃ©todos get, post, put, delete                    â”‚
â”‚  â””â”€ Trata erros 401                                   â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  routes/auth.js                                        â”‚
â”‚  â”œâ”€ POST /register                                     â”‚
â”‚  â”‚   â”œâ”€ Valida entrada                                â”‚
â”‚  â”‚   â”œâ”€ Hash senha                                    â”‚
â”‚  â”‚   â”œâ”€ Cria usuÃ¡rio                                  â”‚
â”‚  â”‚   â””â”€ Gera JWT                                      â”‚
â”‚  â”‚                                                    â”‚
â”‚  â”œâ”€ POST /login                                       â”‚
â”‚  â”‚   â”œâ”€ Busca usuÃ¡rio                                â”‚
â”‚  â”‚   â”œâ”€ Valida senha                                 â”‚
â”‚  â”‚   â”œâ”€ Atualiza lastLogin                           â”‚
â”‚  â”‚   â””â”€ Gera JWT                                      â”‚
â”‚  â”‚                                                    â”‚
â”‚  â”œâ”€ GET /verify                                       â”‚
â”‚  â”‚   â”œâ”€ Valida JWT                                   â”‚
â”‚  â”‚   â”œâ”€ Busca usuÃ¡rio                                â”‚
â”‚  â”‚   â””â”€ Retorna dados                                 â”‚
â”‚  â”‚                                                    â”‚
â”‚  â”œâ”€ POST /refresh                                     â”‚
â”‚  â”‚   â”œâ”€ Valida JWT                                   â”‚
â”‚  â”‚   â””â”€ Gera novo JWT                                â”‚
â”‚  â”‚                                                    â”‚
â”‚  â””â”€ POST /logout                                      â”‚
â”‚      â””â”€ Apenas notificaÃ§Ã£o                            â”‚
â”‚                                                        â”‚
â”‚  middleware/auth.js                                   â”‚
â”‚  â”œâ”€ Extrai token do header                            â”‚
â”‚  â”œâ”€ Verifica assinatura JWT                           â”‚
â”‚  â”œâ”€ Verifica expiraÃ§Ã£o                                â”‚
â”‚  â”œâ”€ Carrega req.user                                  â”‚
â”‚  â””â”€ Passa para prÃ³ximo middleware                     â”‚
â”‚                                                        â”‚
â”‚  models/user.js                                       â”‚
â”‚  â”œâ”€ Define schema User                                â”‚
â”‚  â”œâ”€ ValidaÃ§Ãµes banco de dados                         â”‚
â”‚  â”œâ”€ Ãndices (email Ãºnico)                             â”‚
â”‚  â””â”€ Scopes (withPassword, etc)                        â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Diagrama de Arquitetura Visual**  
**Ãšltima atualizaÃ§Ã£o**: 29 de Dezembro de 2025

